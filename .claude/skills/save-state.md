---
skill: holdem-project:save-state
description: 현재 작업 상태를 저장합니다. 토큰 소진으로 중단되기 전에 사용합니다.
---

# 작업 상태 저장 (Save State)

토큰 소진이 임박하거나 작업을 중단해야 할 때 현재 상태를 저장합니다.

## 실행 타이밍

다음 상황에서 이 스킬을 실행하세요:
- 토큰 사용량이 **30,000 토큰 초과** 시
- "Token limit approaching" 경고 시
- 장시간 작업(1시간 이상) 후 휴식 전
- Phase 작업 중간에 계정 전환 필요 시

## 자동 실행 절차

### 1단계: 진행 상황 분석

현재 대화 내역에서 다음 정보를 추출합니다:
- 작업 중인 Phase 번호
- 완료된 하위 항목 (✅ 표시된 것들)
- 현재 작업 중인 항목
- 수정한 파일 목록

### 2단계: 상태 파일 생성

`.planning/current_state.md` 파일을 다음 형식으로 생성합니다:

```markdown
# 현재 작업 상태

**저장 시간**: [ISO 8601 타임스탬프]
**계정**: [계정 번호 또는 식별자]

---

## 📍 진행 중인 Phase

**Phase**: [Phase 번호] - [Phase 이름]
**진행률**: [X%]
**시작 시간**: [시작 타임스탬프]
**예상 남은 시간**: [분 단위]

---

## ✅ 완료된 작업

- [x] [완료된 항목 1]
- [x] [완료된 항목 2]
- [x] [완료된 항목 3]

---

## 🔄 현재 작업 중

**항목**: [현재 작업 항목 번호 및 이름]
**세부 내용**: [구체적인 작업 내용]
**진행 상황**: [상세 설명]

---

## 📝 수정 중인 파일

### [파일명 1]
- **경로**: [전체 경로]
- **수정 위치**: Line [시작]-[끝]
- **변경 내용**: [간단한 설명]
- **완료 여부**: [완료/미완료]

### [파일명 2]
- **경로**: [전체 경로]
- **수정 위치**: [위치]
- **변경 내용**: [설명]
- **완료 여부**: [완료/미완료]

---

## ⏭️ 다음 작업

**우선순위 1**:
- [ ] [다음 작업 1]
  - 설명: [간단한 설명]
  - 예상 시간: [분]

**우선순위 2**:
- [ ] [다음 작업 2]
  - 설명: [간단한 설명]
  - 예상 시간: [분]

---

## ⚠️ 주의사항

1. [주의사항 1]
2. [주의사항 2]
3. [주의사항 3]

---

## 🔧 필요한 서브에이전트

- [에이전트 이름]: [사용 목적]

---

## 📊 토큰 사용량

- **현재 사용량**: [토큰 수]
- **예상 추가 필요량**: [토큰 수]
- **권장 조치**: [계정 전환/작업 분할/etc]

---

## 🧪 검증 상태

- [ ] 유닛 테스트 실행 필요
- [ ] 통합 테스트 실행 필요
- [ ] 수동 테스트 필요
- [ ] 코드 리뷰 필요

---

## 💾 마지막 Git 커밋

**Commit Hash**: [해시값]
**Commit Message**: [메시지]
**Committed Files**: [파일 목록]
```

### 3단계: WORK_PLAN_2026.md 업데이트

작업 계획서에서 완료된 항목에 ✅ 표시를 추가합니다.

### 4단계: Git 커밋 및 푸시

변경사항을 커밋하고 푸시합니다:

```bash
cd /Users/mr.joo/Desktop/holdem
git add .
git commit -m "WIP: [Phase 번호] [작업 내용] ([진행률]%)"
git push origin develop
```

### 5단계: 저장 완료 확인 메시지

사용자에게 저장 완료를 알립니다:

```markdown
## 💾 작업 상태 저장 완료

### 저장된 정보
- 상태 파일: `.planning/current_state.md`
- Git 커밋: `[커밋 해시]`
- 진행 중인 Phase: Phase [번호]
- 진행률: [X%]

### 다음 계정에서 복구 방법
1. 새 계정으로 Claude Code 실행
2. `/resume-work` 명령어 실행
3. 작업 자동 재개

### 예상 추가 작업 시간
- Phase [번호] 완료까지: 약 [X]분
- 예상 토큰 사용량: 약 [X,XXX] 토큰

---

✅ 안전하게 작업을 중단하고 계정을 전환할 수 있습니다.
```

## 예시

### 입력
```
/save-state
```

### 출력
```markdown
## 💾 작업 상태 저장 중...

✅ 진행 상황 분석 완료
✅ 상태 파일 생성: .planning/current_state.md
✅ WORK_PLAN_2026.md 업데이트
✅ Git 커밋 완료: abc1234

---

## 💾 작업 상태 저장 완료

### 저장된 정보
- 상태 파일: `.planning/current_state.md`
- Git 커밋: `abc1234`
- 진행 중인 Phase: Phase 1.1 - 헤즈업 게임 규칙
- 진행률: 60%

### 다음 계정에서 복구 방법
1. 새 계정으로 Claude Code 실행
2. `cd /Users/mr.joo/Desktop/holdem`
3. `/resume-work` 명령어 실행
4. 작업 자동 재개

### 예상 추가 작업 시간
- Phase 1.1 완료까지: 약 20분
- 예상 토큰 사용량: 약 3,000 토큰

---

✅ 안전하게 작업을 중단하고 계정을 전환할 수 있습니다.

**현재 토큰 사용량**: 32,450 / 40,000
**권장**: 즉시 계정 전환 권장
```

## 자동 체크 항목

### 저장 전 체크
- [ ] 현재 Phase 식별
- [ ] 수정된 파일 목록 확인
- [ ] 다음 작업 항목 확인
- [ ] 주의사항 정리

### 저장 후 체크
- [ ] 상태 파일 생성 확인
- [ ] Git 커밋 성공 확인
- [ ] Git push 성공 확인
- [ ] 작업 계획서 업데이트 확인

## 에러 처리

### Git 커밋 실패
```markdown
❌ Git 커밋 실패
원인: [에러 메시지]

수동 커밋을 시도해주세요:
git add .
git commit -m "WIP: [작업 내용]"
git push origin develop
```

### 파일 쓰기 실패
```markdown
❌ 상태 파일 저장 실패
원인: [에러 메시지]

다음 정보를 메모장에 직접 저장해주세요:
---
[상태 정보 텍스트]
---
```

## 고급 기능

### 자동 저장 (선택)
Phase 작업 시작 시 15분마다 자동으로 상태를 저장하도록 설정할 수 있습니다.

### 여러 계정 관리
`.planning/accounts.md` 파일에 계정별 토큰 사용 현황을 기록합니다:

```markdown
# 계정 관리

## 계정 1
- 토큰 한도: 40,000
- 현재 사용: 35,200
- 남은 토큰: 4,800
- 마지막 작업: Phase 1.1

## 계정 2
- 토큰 한도: 40,000
- 현재 사용: 2,100
- 남은 토큰: 37,900
- 상태: 대기 중
```

## 관련 스킬

- `/resume-work`: 저장된 작업 재개
- `/check-progress`: 진행 상황 확인

## 주의사항

1. **즉시 실행**: 토큰 경고 시 즉시 실행
2. **Git 푸시 필수**: 커밋만 하고 푸시 안 하면 다른 계정에서 접근 불가
3. **상세 기록**: 가능한 상세하게 상태 기록
4. **테스트 상태**: 테스트가 필요한 상태인지 명확히 기록
