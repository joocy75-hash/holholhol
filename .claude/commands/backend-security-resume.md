# λ°±μ—”λ“ λ³΄μ• μμ • μ‘μ—… μ¬κ°

μ €μ¥λ μ²΄ν¬ν¬μΈνΈλ΅λ¶€ν„° λ°±μ—”λ“ λ³΄μ• μμ • μ‘μ—…μ„ μ¬κ°ν•©λ‹λ‹¤.
μƒλ΅μ΄ κ³„μ •μΌλ΅ μ „ν™ν•κ±°λ‚, μ‘μ—…μ„ μ¤‘λ‹¨ν–λ‹¤κ°€ λ‹¤μ‹ μ‹μ‘ν•  λ• μ‚¬μ©ν•μ„Έμ”.

## μ‚¬μ©λ²•
```
/backend-security-resume
```

---

## π”„ μλ™ μ‹¤ν–‰ μ μ°¨

### Step 1: μµμ‹  μ²΄ν¬ν¬μΈνΈ μ°ΎκΈ°

κ°€μ¥ μµκ·Ό μ²΄ν¬ν¬μΈνΈ νμΌμ„ μ°ΎμΌμ„Έμ”:

\`\`\`bash
# μµμ‹  μ²΄ν¬ν¬μΈνΈ μ°ΎκΈ°
LATEST_CHECKPOINT=$(ls -t .planning/backend-security-fixes/checkpoints/*.md 2>/dev/null | head -1)

if [ -z "$LATEST_CHECKPOINT" ]; then
    echo "μ²΄ν¬ν¬μΈνΈκ°€ μ—†μµλ‹λ‹¤. WORK_STATE.mdλ¥Ό ν™•μΈν•μ„Έμ”."
    cat .planning/backend-security-fixes/WORK_STATE.md
else
    echo "μµμ‹  μ²΄ν¬ν¬μΈνΈ: $LATEST_CHECKPOINT"
fi
\`\`\`

**μ¶λ ¥ μμ‹:**
\`\`\`
μµμ‹  μ²΄ν¬ν¬μΈνΈ: .planning/backend-security-fixes/checkpoints/20260123_211500_P1-Step1.3.md
\`\`\`

---

### Step 2: μ²΄ν¬ν¬μΈνΈ νμΌ μ½κΈ°

μµμ‹  μ²΄ν¬ν¬μΈνΈ νμΌμ„ μ „μ²΄ μ½κ³  λ¶„μ„ν•μ„Έμ”:

\`\`\`bash
# μ²΄ν¬ν¬μΈνΈ νμΌ μ½κΈ°
cat $LATEST_CHECKPOINT
\`\`\`

**λ¶„μ„ν•  μ„Ήμ…:**
1. **π“ μ‘μ—… μƒνƒ**
   - ν„μ¬ Phaseμ™€ Step ν™•μΈ
   - μ „μ²΄ μ§„ν–‰λ¥  ν™•μΈ

2. **π“ νμΌ λ³€κ²½ μƒνƒ**
   - μ™„λ£λ νμΌ λ©λ΅
   - μμ • μ¤‘μΈ νμΌ λ©λ΅
   - μμ • μμ • νμΌ λ©λ΅

3. **β… μ™„λ£λ μ‘μ—…**
   - μ²΄ν¬λ¦¬μ¤νΈμ—μ„ λ§μ§€λ§‰ [x] ν•­λ© ν™•μΈ

4. **π” λ‹¤μ μ‘μ—…**
   - μ¦‰μ‹ μν–‰ν•  μ‘μ—… λ©λ΅ ν™•μΈ

5. **π¨ μ£Όμμ‚¬ν•­ λ° μ΄μ**
   - λΈ”λ΅μ»¤λ‚ μ¤‘μ” κ²°μ •μ‚¬ν•­ ν™•μΈ

---

### Step 3: WORK_STATE.md ν™•μΈ

ν„μ¬ ν”„λ΅μ νΈ μƒνƒλ¥Ό WORK_STATE.mdμ—μ„ ν™•μΈν•μ„Έμ”:

\`\`\`bash
cat .planning/backend-security-fixes/WORK_STATE.md
\`\`\`

**ν™•μΈ μ‚¬ν•­:**
- "μ§„ν–‰ μ¤‘μΈ μ‘μ—…" μ„Ήμ…μ Phase/Step
- ν•΄λ‹Ή Phaseμ μ²΄ν¬λ¦¬μ¤νΈ μƒνƒ
- "κ³„μ • μ „ν™ λ΅κ·Έ"μ— μ΄μ „ μ‘μ—…μ κΈ°λ΅
- "μ•λ ¤μ§„ μ΄μ/λΈ”λ΅μ»¤" ν™•μΈ

---

### Step 4: Git μƒνƒ ν™•μΈ

μ‘μ—… λ””λ ‰ν† λ¦¬μ Git μƒνƒλ¥Ό ν™•μΈν•μ„Έμ”:

\`\`\`bash
cd /Users/mr.joo/Desktop/holdem

# Git μƒνƒ
git status

# λ³€κ²½λ νμΌ λ©λ΅
git diff --name-only

# Staged νμΌ λ©λ΅
git diff --cached --name-only

# μµκ·Ό μ»¤λ°‹ ν™•μΈ
git log --oneline -5
\`\`\`

**μ²΄ν¬ν¬μΈνΈμ™€ λΉ„κµ:**
- μ²΄ν¬ν¬μΈνΈμ Git μƒνƒμ™€ ν„μ¬ μƒνƒκ°€ μΌμΉν•λ”μ§€ ν™•μΈ
- λ¶μΌμΉ μ‹ μ›μΈ νμ•… (λ‹¤λ¥Έ μ‘μ—…μκ°€ μ»¤λ°‹ν–λ”μ§€ λ“±)

---

### Step 5: μ‘μ—… ν™κ²½ κ²€μ¦

λ°±μ—”λ“ κ°λ° ν™κ²½μ΄ μ¤€λΉ„λμ–΄ μλ”μ§€ ν™•μΈν•μ„Έμ”:

\`\`\`bash
# 1. Python κ°€μƒν™κ²½ ν™μ„±ν™” (ν•„μ” μ‹)
cd backend
source venv/bin/activate || python -m venv venv && source venv/bin/activate

# 2. μμ΅΄μ„± ν™•μΈ
pip list | grep -E "(fastapi|sqlalchemy|pytest)"

# 3. λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° ν™•μΈ
python -c "from app.config import settings; print(f'DB: {settings.DATABASE_URL}')"

# 4. λ°±μ—”λ“ μ„λ²„ μ‹¤ν–‰ κ°€λ¥ μ—¬λ¶€ (κ°„λ‹¨ μ²΄ν¬)
python -c "from app.main import app; print('Import OK')"

# 5. ν…μ¤νΈ μ‹¤ν–‰ κ°€λ¥ μ—¬λ¶€
pytest --collect-only backend/tests/ | head -10
\`\`\`

**μ—λ¬ λ°μƒ μ‹:**
- μμ΅΄μ„± μ¬μ„¤μΉ: `pip install -r requirements.txt`
- λ°μ΄ν„°λ² μ΄μ¤ ν™•μΈ: `psql -h localhost -U postgres -d holdem -c "SELECT 1"`
- λ§μ΄κ·Έλ μ΄μ… ν™•μΈ: `alembic current`

---

### Step 6: μ»¨ν…μ¤νΈ μ”μ•½ μ¶λ ¥

μ‚¬μ©μμ—κ² ν„μ¬ μƒνƒλ¥Ό μ”μ•½ν•μ—¬ μ¶λ ¥ν•μ„Έμ”:

\`\`\`markdown
## π― μ‘μ—… μ¬κ° μ¤€λΉ„ μ™„λ£

### ν„μ¬ μƒνƒ
- **Phase**: [P1/P2/P3] - [Phase μ„¤λ…]
- **Step**: [X.Y] - [Step μ„¤λ…]
- **μ§„ν–‰λ¥ **: [Z%] ([μ™„λ£ Steps/μ „μ²΄ Steps])
- **ν† ν° μ‚¬μ©λ‰**: [μ΄μ „ κ³„μ • μ‚¬μ©λ‰ μ°Έκ³ ]

### λ§μ§€λ§‰ μ™„λ£ μ‘μ—…
- [λ§μ§€λ§‰ μ™„λ£ν• μ‘μ—… λ‚΄μ©]
- μ™„λ£ μ‹κ°„: [YYYY-MM-DD HH:MM:SS]

### λ‹¤μ μ‘μ—…
1. [μ¦‰μ‹ μν–‰ν•  μ‘μ—… 1]
2. [μ¦‰μ‹ μν–‰ν•  μ‘μ—… 2]
3. [μ¦‰μ‹ μν–‰ν•  μ‘μ—… 3]

### μ£Όμμ‚¬ν•­
- [β οΈ λΈ”λ΅μ»¤λ‚ μ¤‘μ” μ΄μ]
- [π’΅ κΈ°μ μ  κ²°μ •μ‚¬ν•­]

### Git μƒνƒ
- Staged: [Xκ° νμΌ]
- Unstaged: [Yκ° νμΌ]
- Untracked: [Zκ° νμΌ]

---

## π€ μ‘μ—… μ¬κ° λ°©λ²•

### λ°©λ²• 1: μλ™ μ¬κ° (κ¶μ¥)
μ•„λ λ…λ Ήμ„ μμ„λ€λ΅ μ‹¤ν–‰ν•μ„Έμ”:

1. **ROADMAP.mdμ—μ„ ν„μ¬ Step μƒμ„Έ κ³„ν ν™•μΈ**
   \`\`\`bash
   cat .planning/backend-security-fixes/ROADMAP.md | grep -A 50 "Step [ν„μ¬ Step]"
   \`\`\`

2. **"λ‹¤μ μ‘μ—…" μ²« λ²μ§Έ ν•­λ©λ¶€ν„° μ‹μ‘**
   [κµ¬μ²΄μ μΈ λ…λ Ήμ–΄ λλ” μ‘μ—… μ§€μΉ¨]

3. **μ‘μ—… μ§„ν–‰ μ¤‘ WORK_STATE.md μ—…λ°μ΄νΈ**
   - μ²΄ν¬λ¦¬μ¤νΈ [x] ν‘μ‹
   - "μ§„ν–‰ μ¤‘μΈ μ‘μ—…" μ„Ήμ… μ—…λ°μ΄νΈ

### λ°©λ²• 2: μλ™ μ¬κ°
1. ROADMAP.mdμ—μ„ ν„μ¬ Step ν™•μΈ
2. μ²΄ν¬ν¬μΈνΈμ "λ‹¤μ μ‘μ—…" μ°Έκ³ 
3. μ§μ ‘ μ‘μ—… μ§„ν–‰

---

## π“‹ μ¬κ° μ²΄ν¬λ¦¬μ¤νΈ

μ‘μ—…μ„ μ¬κ°ν•κΈ° μ „μ— λ‹¤μμ„ ν™•μΈν•μ„Έμ”:

- [ ] μµμ‹  μ²΄ν¬ν¬μΈνΈ νμΌ μ½μ
- [ ] WORK_STATE.md ν„μ¬ μƒνƒ ν™•μΈ
- [ ] Git μƒνƒ ν™•μΈ (μ²΄ν¬ν¬μΈνΈμ™€ μΌμΉ)
- [ ] λ°±μ—”λ“ μ„λ²„ μ‹¤ν–‰ κ°€λ¥ ν™•μΈ
- [ ] ν…μ¤νΈ ν™κ²½ μ •μƒ ν™•μΈ
- [ ] ν„μ¬ Phase/Step μ΄ν•΄
- [ ] λ‹¤μ μ‘μ—… λ©λ΅ μ™μ§€
- [ ] μ£Όμμ‚¬ν•­ λ° λΈ”λ΅μ»¤ ν™•μΈ
- [ ] κ³„μ • μ „ν™ λ΅κ·Έ μ—…λ°μ΄νΈ

---

## π” μƒμ„Έ μ¬κ° μ‹λ‚λ¦¬μ¤

### μ‹λ‚λ¦¬μ¤ 1: Phase μ¤‘κ°„μ—μ„ μ¬κ°

**μƒν™©**: Phase 1 Step 1.3μ„ μ§„ν–‰ μ¤‘μ΄μ—μ

**μ¬κ° μ μ°¨**:
1. μ²΄ν¬ν¬μΈνΈμ—μ„ Step 1.3 μ²΄ν¬λ¦¬μ¤νΈ ν™•μΈ
2. λ§μ§€λ§‰ [x] ν•­λ© μ΄ν›„λ¶€ν„° μ§„ν–‰
3. ROADMAP.mdμ—μ„ Step 1.3 μƒμ„Έ κ³„ν μ°Έκ³ 
4. μ‘μ—… μ™„λ£ μ‹ μ²΄ν¬λ¦¬μ¤νΈ [x] ν‘μ‹
5. Step μ™„λ£ ν›„ /backend-security-checkpoint μ‹¤ν–‰

**μμ‹**:
\`\`\`markdown
Step 1.3 μ²΄ν¬λ¦¬μ¤νΈ:
- [x] main.py λΌμ°ν„° λ“±λ΅ ν™•μΈ
- [x] admin_partner.py router prefix ν™•μΈ
- [ ] main.py μμ • (prefix β†’ API_V1_PREFIX)  β† μ—¬κΈ°μ„λ¶€ν„° μ‹μ‘
- [ ] tags μ¶”κ°€
- [ ] μ„λ²„ μ¬μ‹μ‘ λ° /docs ν™•μΈ
- [ ] μµμΆ… κ²½λ΅ ν™•μΈ: /api/v1/admin/partners
\`\`\`

### μ‹λ‚λ¦¬μ¤ 2: Step μ™„λ£ μ§ν›„ μ¬κ°

**μƒν™©**: Step 1.2 μ™„λ£, Step 1.3 μ‹μ‘ μ „

**μ¬κ° μ μ°¨**:
1. ROADMAP.mdμ—μ„ Step 1.3 μ°ΎκΈ°
2. Step 1.3 "μ‘μ—… λ‚΄μ©" μ„Ήμ…λ¶€ν„° μ‹μ‘
3. WORK_STATE.mdμ—μ„ Step 1.3 μ„Ήμ… "μ‹μ‘ μ‹κ°„" κΈ°λ΅
4. μ²΄ν¬λ¦¬μ¤νΈ μ²« ν•­λ©λ¶€ν„° μ§„ν–‰

### μ‹λ‚λ¦¬μ¤ 3: Phase μ „ν™ μ‹μ μ—μ„ μ¬κ°

**μƒν™©**: Phase 1 μ™„λ£, Phase 2 μ‹μ‘ μ „

**μ¬κ° μ μ°¨**:
1. Phase 1 κ²€μ¦ κ²°κ³Ό ν™•μΈ (μ²΄ν¬ν¬μΈνΈ μ°Έκ³ )
2. Phase 2 ROADMAP μ„Ήμ… μ „μ²΄ μ½κΈ°
3. Phase 2 λ©ν‘ λ° μμ΅΄μ„± ν™•μΈ
4. Step 2.1λ¶€ν„° μ‹μ‘

### μ‹λ‚λ¦¬μ¤ 4: κΈ΄κΈ‰ μ²΄ν¬ν¬μΈνΈμ—μ„ μ¬κ°

**μƒν™©**: ν† ν° μ†μ§„μΌλ΅ μ‘μ—… μ¤‘λ‹¨ (Step μ¤‘κ°„)

**μ¬κ° μ μ°¨**:
1. μ²΄ν¬ν¬μΈνΈμ "μ½”λ“ μ¤λ‹ν«" μ„Ήμ… ν™•μΈ
2. μμ • μ¤‘μ΄λ μ½”λ“ μ΄μ–΄μ„ μ‘μ„±
3. νμΌ μ €μ¥ ν›„ ν…μ¤νΈ
4. μ²΄ν¬λ¦¬μ¤νΈ [x] ν‘μ‹

---

## π”„ κ³„μ • μ „ν™ λ΅κ·Έ μ—…λ°μ΄νΈ

μ‘μ—…μ„ μ¬κ°ν•  λ• WORK_STATE.mdμ "κ³„μ • μ „ν™ λ΅κ·Έ"λ¥Ό μ—…λ°μ΄νΈν•μ„Έμ”:

\`\`\`bash
# .planning/backend-security-fixes/WORK_STATE.md μμ •
# "κ³„μ • μ „ν™ λ΅κ·Έ" μ„Ήμ…μ— λ‹¤μ μ¶”κ°€:

| [ν„μ¬ μ‹κ°„] | [μ΄μ „ κ³„μ •] | [μƒ κ³„μ •] | [ν„μ¬ Phase] | [ν„μ¬ Step] | [μ΄μ „ ν† ν° μ‚¬μ©λ‰] | μ¬κ° |
\`\`\`

**μμ‹**:
\`\`\`
| 2026-01-23 21:30 | account-A | account-B | P1 | Step1.3 | 180000/200000 (90%) | μ¬κ° |
\`\`\`

---

## π“ μ‘μ—… μ¬κ° μ„±κ³µ ν™•μΈ

μ‘μ—… μ¬κ°κ°€ μ„±κ³µμ μΈμ§€ ν™•μΈν•μ„Έμ”:

### 1. μ»¨ν…μ¤νΈ μ΄ν•΄λ„ μ²΄ν¬
λ‹¤μ μ§λ¬Έμ— λ‹µν•  μ μμ–΄μ•Ό ν•©λ‹λ‹¤:
- [ ] ν„μ¬ μ–΄λ–¤ Phaseλ¥Ό μ§„ν–‰ μ¤‘μΈκ°€?
- [ ] ν„μ¬ Stepμ λ©ν‘λ” λ¬΄μ—‡μΈκ°€?
- [ ] λ§μ§€λ§‰μΌλ΅ μ™„λ£ν• μ‘μ—…μ€ λ¬΄μ—‡μΈκ°€?
- [ ] λ‹¤μμ— ν•΄μ•Ό ν•  μ‘μ—…μ€ λ¬΄μ—‡μΈκ°€?
- [ ] ν„μ¬ λΈ”λ΅μ»¤λ‚ μ΄μκ°€ μλ”κ°€?

### 2. νμΌ μƒνƒ μΌμΉ ν™•μΈ
- [ ] μ²΄ν¬ν¬μΈνΈμ Git μƒνƒμ™€ ν„μ¬ μƒνƒ μΌμΉ
- [ ] μμ • μ¤‘μ΄λ νμΌμ΄ μ΅΄μ¬ν•¨
- [ ] Staged/Unstaged μƒνƒ λ™μΌ

### 3. μ‘μ—… μ§„ν–‰ κ°€λ¥μ„± ν™•μΈ
- [ ] λ‹¤μ μ‘μ—…μ΄ λ…ν™•ν•¨
- [ ] ν•„μ”ν• λ„κµ¬/ν™κ²½ μ¤€λΉ„λ¨
- [ ] μμ΅΄μ„± ν•΄κ²°λ¨

---

## β οΈ μ¬κ° μ‹¤ν¨ μ‹ λ€μ²

### λ¬Έμ  1: μ²΄ν¬ν¬μΈνΈ νμΌμ΄ μ—†μ

**μ¦μƒ**:
\`\`\`
ls: .planning/backend-security-fixes/checkpoints/*.md: No such file or directory
\`\`\`

**ν•΄κ²°**:
1. WORK_STATE.md μ§μ ‘ μ½κΈ°
2. "μ§„ν–‰ μ¤‘μΈ μ‘μ—…" μ„Ήμ… ν™•μΈ
3. ROADMAP.mdμ—μ„ ν•΄λ‹Ή Step μ°ΎκΈ°
4. μ²΄ν¬λ¦¬μ¤νΈ κΈ°λ°μΌλ΅ μ‘μ—… μ¬κ°

### λ¬Έμ  2: Git μƒνƒ λ¶μΌμΉ

**μ¦μƒ**:
- μ²΄ν¬ν¬μΈνΈ: "admin_partner.py μμ • μ¤‘"
- ν„μ¬ μƒνƒ: "admin_partner.py λ³€κ²½ μ—†μ"

**ν•΄κ²°**:
1. Git logλ΅ μµκ·Ό μ»¤λ°‹ ν™•μΈ
2. λ‹¤λ¥Έ μ‘μ—…μκ°€ μ»¤λ°‹ν–λ”μ§€ ν™•μΈ
3. μ¶©λ μ‹ /backend-security-status μ‹¤ν–‰ν•μ—¬ ν„μ¬ μƒνƒ μ¬ν‰κ°€

### λ¬Έμ  3: ν™κ²½ λ¬Έμ 

**μ¦μƒ**:
- μ„λ²„ μ‹μ‘ μ‹¤ν¨
- ν…μ¤νΈ μ‹¤ν–‰ λ¶κ°€
- μμ΅΄μ„± μ¤λ¥

**ν•΄κ²°**:
1. μμ΅΄μ„± μ¬μ„¤μΉ
2. λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° ν™•μΈ
3. ν™κ²½λ³€μ ν™•μΈ
4. κ°€μƒν™κ²½ μ¬μƒμ„±

---

## π“ μ¬κ° ν›„ μ‘μ—… ν

### 1. μ μ§„μ  μ¬κ°
- κΈ‰ν•κ² λ¨λ“  κ²ƒμ„ μ΄ν•΄ν•λ ¤ ν•μ§€ λ§ κ²ƒ
- μ²΄ν¬ν¬μΈνΈ β†’ WORK_STATE β†’ ROADMAP μμ„λ΅ μ½κΈ°
- λ‹¤μ μ‘μ—… 1κ°λ§ λ¨Όμ € νμ•…

### 2. κ²€μ¦ν•λ©° μ§„ν–‰
- κ° μ‘μ—… μ™„λ£ μ‹ ν…μ¤νΈ μ‹¤ν–‰
- μ²΄ν¬λ¦¬μ¤νΈ ν•­λ©λ§λ‹¤ [x] ν‘μ‹
- λ¶ν™•μ‹¤ν•λ©΄ agent ν™μ© (code-reviewer λ“±)

### 3. μ£ΌκΈ°μ  μ²΄ν¬ν¬μΈνΈ
- ν† ν° 70% λ„λ‹¬ μ‹ λ‹¤μ Step μ™„λ£ ν›„ μ²΄ν¬ν¬μΈνΈ
- 90% λ„λ‹¬ μ‹ μ¦‰μ‹ μ²΄ν¬ν¬μΈνΈ
- μλ―Έ μλ” μ‘μ—… λ‹¨μ„λ§λ‹¤ μ²΄ν¬ν¬μΈνΈ

### 4. μ΄μ μ¦‰μ‹ κΈ°λ΅
- λΈ”λ΅μ»¤ λ°κ²¬ μ‹ WORK_STATE.mdμ— κΈ°λ΅
- κΈ°μ μ  κ²°μ • μ‹ μ‘μ—… λ…ΈνΈμ— κΈ°λ΅
- μ—λ¬ λ°μƒ μ‹ μ²΄ν¬ν¬μΈνΈμ— κΈ°λ΅

---

## β… μ‘μ—… μ¬κ° μ™„λ£

λ‹¤μμ„ ν™•μΈν–λ‹¤λ©΄ μ‘μ—…μ„ μ‹μ‘ν•μ„Έμ”:

- [ ] ν„μ¬ Phase/Step μ΄ν•΄
- [ ] λ‹¤μ μ‘μ—… νμ•…
- [ ] ν™κ²½ μ¤€λΉ„ μ™„λ£
- [ ] κ³„μ • μ „ν™ λ΅κ·Έ μ—…λ°μ΄νΈ
- [ ] WORK_STATE.md "μ§„ν–‰ μ¤‘μΈ μ‘μ—…" μ—…λ°μ΄νΈ

**μ‘μ—… μ‹μ‘!**

\`\`\`

---

**Skill μ‹¤ν–‰ μ™„λ£**

μ‘μ—…μ„ μ¬κ°ν•μ„Έμ”. μ§„ν–‰ μ¤‘ λ§‰νλ©΄ `/backend-security-status`λ΅ ν„μ¬ μƒνƒλ¥Ό ν™•μΈν•μ„Έμ”.
